datasource db {
  provider = "postgresql"
  url = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

generator client {
  provider = "prisma-client-js"
}

model Potion {
  id               String             @id @default(uuid())
  title            String
  creationDate     DateTime
  rating           Float
  description      String
  details          String
  thumbnailUrl     String
  mainImageUrl     String
  metrics          Metrics?
  magicalBrewStats MagicalBrewStats?
  instructions     String[]
  tags             String[]
  ingredients      PotionIngredient[]
}

model Ingredient {
  id               String             @id @default(uuid())
  name             String             @unique
  shortDescription String
  inventory        Int
  potions          PotionIngredient[]
}

model PotionIngredient {
  id           String     @id @default(uuid())
  potion       Potion     @relation(fields: [potionId], references: [id])
  potionId     String
  ingredient   Ingredient @relation(fields: [ingredientId], references: [id])
  ingredientId String
  quantity     Float

  @@unique([potionId, ingredientId])
}

model Metrics {
  id          String  @id @default(uuid())
  potionId    String  @unique
  potion      Potion  @relation(fields: [potionId], references: [id])
  potency     String
  duration    String
  difficulty  String
  sideEffects String
}

model MagicalBrewStats {
  id               String  @id @default(uuid())
  potionId         String  @unique
  potion           Potion  @relation(fields: [potionId], references: [id])
  arcanePotency    String
  etherealEssence  String
  corporealMass    String
  vitalForce       String
  mysticalResidue  String
  pureMagic        String
  elementalBalance String
  spiritResonance  String
}